html
  head 
    title="Edit Application"
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet")
    style 
      include ../static/style.css

  body 
    include ./navbar.pug

    div(class="container")
      h4(class="p-2")="Edit Application"
      div(class="card")
        div(class="card-body")
          form#form-1(action="/auth/editapp" method="POST")
            div(class="form-group")
              h5(class="mt-3") Select Application 
              select(class="mdb-select md-form mb-3 w-50" name="app_acronym")
                option(value="" disabled selected)="Choose Application"
                  if selected_app
                    option(value=selected_app[0].app_acronym selected)=selected_app[0].app_acronym
                  else 
                    if app_arr
                      for app in app_arr 
                        option(value=app.app_acronym)=app.app_acronym
            
              if app_arr
                div(class="row")
                  button(type="submit" form="form-1" class="btn btn-primary ml-3 mb-3" name="check_acronym_btn" value="true")="Check application"
                
              if selected_app
                form(action="/auth/editapp" method="POST")
                  div(class="form-group")
                    h5 Description
                    textarea(name="description", cols="57", rows="4") 
                      if selected_app
                        for app in selected_app
                          | #{app.description}
                  
                  if selected_app 
                    for app in selected_app
                      div(class="form-group")
                        h5="rNumber"
                        input(type="text" name="rnumber" value=app.rnumber placeholder=app.rnumber disabled="disabled")
                  
                  div(class="form-group")
                    h5="Start Date"
                    input(type="date" name="start_date" value=start_Date)
                  
                  div(class="form-group")
                    h5="End Date"
                    input(type="date" name="end_date" value=end_Date)

                  div(class="form-group")
                    h5(class="mt-3") Permit Open 
                    select(class="mdb-select md-form mb-3 w-50" name="permit_open")
                      option(value="" disabled selected)="Choose Role"
                      if roles
                        for role in roles
                          option(value=role)=role
                  
                  div(class="form-group")
                    h5(class="mt-3") Permit To-do-list
                    select(class="mdb-select md-form mb-3 w-50" name="permit_todolist")
                      option(value="" disabled selected)="Choose Role"
                      if roles
                        for role in roles
                          option(value=role)=role

                  div(class="form-group")
                    h5(class="mt-3") Permit Doing 
                    select(class="mdb-select md-form mb-3 w-50" name="permit_doing")
                      option(value="" disabled selected)="Choose Role"
                      if roles
                        for role in roles
                          option(value=role)=role

                  div(class="form-group")
                    h5(class="mt-3") Permit Done  
                    select(class="mdb-select md-form mb-3 w-50" name="permit_done")
                      option(value="" disabled selected)="Choose Role"
                      if roles
                        for role in roles
                          option(value=role)=role

                  button(type="submit" class="btn btn-primary" name="confirm_edit_btn" value="true")="Update"

                  a(href="/" class="ml-4")="Cancel"
      if message
        h4(class="alert alert-danger mt-4")=message 

  script(src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous")

  script(src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous") 